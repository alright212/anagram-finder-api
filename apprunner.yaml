version: 1.0
runtime: docker
build:
  commands:
    build:
      - echo "Building the Estonian Anagram Finder API..."
      - cp .env.production .env
      - php artisan key:generate --force
      - php artisan config:cache
      - php artisan route:cache
      - php artisan view:cache
      - php artisan migrate --force
      - echo "Build completed successfully!"
run:
  runtime-version: latest
  command: apache2-foreground
  network:
    port: 80
    env: PORT
  env:
    - name: APP_ENV
      value: production
    - name: APP_DEBUG
      value: "false"
